"use client";

import { useEffect, useRef, useState } from "react";
import gsap from "gsap";

export default function LogoLoader() {
  const [visible, setVisible] = useState(true);
  const containerRef = useRef(null);
  const maskRef = useRef(null);
  const logoRef = useRef(null);
const loadingTextRef = useRef(null);

  useEffect(() => {
    const tl = gsap.timeline();

    gsap.set(maskRef.current, {
      scaleX: 0,
      transformOrigin: "left center",
    });

    gsap.set(logoRef.current, {
      opacity: 0,
      scale: 0.98,
    });
const dots = loadingTextRef.current.querySelectorAll(".dot");

gsap.set(loadingTextRef.current, { opacity: 0, y: 6 });

gsap.to(loadingTextRef.current, {
  opacity: 1,
  y: 0,
  duration: 0.8,
  ease: "power3.out",
  delay: 0.6,
});

gsap.fromTo(
  dots,
  { opacity: 0.2, y: 0 },
  {
    opacity: 1,
    y: -4,
    duration: 0.6,
    ease: "sine.inOut",
    stagger: 0.15,
    repeat: -1,
    yoyo: true,
    delay: 1,
  }
);



    tl.to(logoRef.current, {
      opacity: 1,
      duration: 0.8,
      ease: "power2.out",
    })
      .to(maskRef.current, {
        scaleX: 1,
        duration: 1.6,
        ease: "power4.inOut",
      })
      .to(logoRef.current, {
        scale: 1.03,
        duration: 1.2,
        ease: "sine.inOut",
      });

    // â± HIDE LOADER AFTER X ms
    const timer = setTimeout(() => {
      gsap.to(containerRef.current, {
        opacity: 0,
        duration: 0.6,
        ease: "power2.inOut",
        onComplete: () => setVisible(false),
      });
    }, 2600); 

    return () => clearTimeout(timer);
  }, []);

  if (!visible) return null;

  return (
    <div
      ref={containerRef}
      className="fixed inset-0 z-[9999] flex items-center justify-center bg-black"
    >
      <div className="relative w-[240px] md:w-[300px]">
        {/* Cinematic glow */}
        <div className="absolute inset-0 blur-3xl bg-[#70c879]/30 opacity-80" />

 
        <svg
          ref={logoRef}
          viewBox="0 0 135 87"
          xmlns="http://www.w3.org/2000/svg"
          className="relative w-full h-auto"
        >
          <defs>
            <mask id="cinematic-mask">
              <rect
                ref={maskRef}
                x="0"
                y="0"
                width="135"
                height="87"
                fill="white"
              />
            </mask>
          </defs>

          {/* LOGO CONTENT */}
          <g mask="url(#cinematic-mask)">
            <path
              fill="#70c879"
              class="cls-2"
              d="M122.03,31.21c-.56,9.67-6.43,8.82-14.14,9.08-4.24.15-8.56.33-12.82.19-5.32-.17-15.15-.22-15.15-7.72v-4.07h9.96c.71,1.76.45,3.43,2.82,3.77,5.19-.24,10.93.47,16.07.04,1.05-.09,2.82-.36,3.13-1.55.41-1.59-.08-3.7-1.92-3.98-1.79-.27-4.19-.27-6.05-.36-5.28-.26-11.45,0-16.62-.71-6.07-.83-6.66-5.85-9.2-10.38-.56-1-.87-2.15-2.25-2.08l-14.66.08-.6.27c-4.69,8.41-8.99,17.06-13.59,25.52-2.05,1.46-4.67.58-6.06-1.34L24.65,14.74c-.32-.52-.83-.47-1.38-.44v25.48h-10.4V5.46h17.59c.08,0,.57.26.69.35,6.08,8.09,11.73,16.59,17.59,24.87.44.48.74.7,1.39.44V5.64c.5-.02.96-.15,1.46-.18,10.4-.59,21.39.43,31.85.05.61.11.97.45,1.31.94,1.85,2.63,3.13,6.85,4.92,9.64.67,1.05,1.38,1.68,2.67,1.84,6.83.81,14.17.2,21.1,1.08,8.16,1.04,9.06,4.33,8.61,12.2Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M73.34,16.21l-.14.64-11.09,22.18c-.09.27-.8.92-.99.92h-11.35l12.74-23.75h10.83Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M120.99,16.38h-9.96c-.4-.49-.31-1.22-.57-1.85-.5-1.22-1.52-1.47-2.74-1.59-3.76-.36-9.82-.23-13.67-.03-.89.05-1.83.41-2.73.33l-4.1-7.52c.12-.17.23-.22.43-.26.91-.16,2.36-.3,3.28-.35,5.76-.31,13.49-.31,19.25,0,2.13.12,6.18.75,7.93,1.94,2.94,2,2.76,6.18,2.89,9.33Z"
            />
          </g>
          {/* <g>
            <path
              fill="#ffffff"
              class="cls-1"
              d="M41.94,74.7v6.93c0,.37-1.04.61-1.34.21-1.42-1.95-2.53-4.62-3.98-6.49-.11-.15,0-.31-.4-.22v6.76s-.69.03-.69,0v-6.85c0-.51.73-.74,1.21-.52.85.39,3.37,5.98,4.51,6.84v-6.67c0-.3.69-.3.69,0Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M47.45,74.49c-2.64.39-2.99,3.68-2.22,5.77.46,1.24,1.42,1.71,2.69,1.82,2.23.18,4.03-.37,4.26-2.86.33-3.61-.97-5.28-4.73-4.73ZM48.6,81.56c-2.22.03-3.01-1.08-3.04-3.21-.02-1.84.44-3.11,2.4-3.33,1.83-.2,3.32.27,3.51,2.28.23,2.42-.06,4.23-2.87,4.26Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M64.43,74.49c-2.64.39-2.99,3.68-2.22,5.77.46,1.24,1.42,1.71,2.69,1.82,2.22.18,4.03-.37,4.26-2.86.33-3.61-.97-5.28-4.73-4.73ZM65.59,81.56c-2.22.03-3.01-1.08-3.04-3.21-.02-1.84.44-3.11,2.4-3.33,1.83-.2,3.32.27,3.51,2.28.23,2.42-.06,4.23-2.87,4.26Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M14.92,81.38v.52h-5.11c-.23,0-.41-.91-.43-1.13-.14-1.16-.12-3.85,0-5.03.06-.54.27-1.3.95-1.3h4.33c.3,0,.3.69,0,.69h-4.33s-.26.24-.26.26v2.51h4.68v.52h-4.68v2.69s.24.26.26.26h4.59Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M90.8,81.38v.52h-5.11c-.23,0-.41-.91-.43-1.13-.13-1.16-.12-3.85,0-5.03.06-.54.28-1.3.95-1.3h4.33c.3,0,.3.69,0,.69h-4.33s-.26.24-.26.26v2.51h4.68v.52h-4.68v2.69s.24.26.26.26h4.59Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M32.41,74.7v7.11c0,.3-.69.3-.69,0v-3.38h-4.68v3.38c0,.3-.69.3-.69,0v-7.11c0-.3.69-.3.69,0v3.21h4.68v-3.21c0-.3.69-.3.69,0Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M78.5,78.69v2.6s-.27.47-.35.52c-.28.17-4.04.15-4.51,0-2.22-.66-2.33-5.9-.18-6.95.91-.44,3.45-.6,4.43-.42.43.08.48.28.43.69h-4.07c-.26,0-.99.63-1.16.92-.78,1.33-.72,5.09,1.33,5.33.41.05,3.04.05,3.22-.08.45-.31-.17-2.74.42-2.87.17-.04.43.2.43.26Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M98.51,81.9h-4.94v-.52h4.42c.68,0,.79-1.61.39-2.04-.49-.52-3.19-1.04-3.99-1.47-.99-.53-1.26-1.74-.68-2.68.18-.29.88-.74,1.16-.74.57,0,3.93-.15,4.07,0,.03.03.03.69,0,.69h-4.25c-.44,0-.81,1.46-.26,1.99.5.48,3.13,1,3.93,1.44,1.57.85.77,3.33.14,3.33Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M23.75,81.9h-4.25c-.6,0-1.6-1.27-1.77-1.87-.77-2.65-.05-5.3,2.99-5.58.72-.07,3.12-.32,2.86.69h-3.55c-.07,0-.83.48-.96.6-1.16,1.04-1.15,4.27.17,5.21,1.19.85,2.78.19,4.08.43.3.05.48.18.43.52Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M134.64,81.38v.52h-4.07c-.07,0-1.13-.64-1.24-.75-1.02-1.02-1.03-4.24-.23-5.4.34-.5,1.59-1.3,2.17-1.3.45,0,3.09-.12,3.21,0,.02.03.03.69,0,.69h-3.38s-.75.31-.84.37c-1.32.88-1.4,4.52-.1,5.43.12.08.88.44.94.44h3.55Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M123.03,81.38v.52h-5.2c.06-.17-.17-.38-.17-.43v-6.76c0-.3.69-.3.69,0v6.67h4.68Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M111.94,81.38v.52h-5.2c.06-.17-.17-.38-.17-.43v-6.76c0-.3.69-.3.69,0v6.67h4.68Z"
            />
            <polygon
              class="cls-1"
              points="7.12 74.62 7.12 75.14 4 75.14 4 81.9 3.48 81.9 3.48 75.14 .36 75.14 .36 74.62 7.12 74.62"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M60.48,81.38v.52h-4.94s-.26-.24-.26-.26v-7.02h.52v6.5s.24.26.26.26h4.42Z"
            />
            <rect class="cls-1" x="81.45" y="74.62" width=".69" height="7.28" />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M114.02,81.03h.69c.14,1.39-.98,1.53-.69,0Z"
            />
            <rect class="cls-1" x="125.11" y="81.03" width=".52" height=".87" />
          </g>
          <g>
            <path
              fill="#ffffff"
              class="cls-1"
              d="M15.59,65.51c-.27,2.63-3.01,2.89-4.75,1.46-2.63-3.46-4.59-7.93-7.23-11.31-.14-.18-.66-.76-.66-.2v12.22H0v-15.16c.35-1.61,3.57-1.89,4.62-.72,2.7,3.49,4.7,8.18,7.37,11.61.15.19.17.36.49.29v-12.22s.24-.26.26-.26h2.6c.14,0,.31.42.27.6-.34,4.39.42,9.38-.01,13.7Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M95.81,54.25v3.73h9.44c.39,0,.39,2.6,0,2.6h-9.44v4.07s.4.43.43.43h9.44v2.6h-11.35c-.64,0-1.6-.96-1.63-1.66.25-4.08-.37-8.63-.02-12.65.09-.99.67-2.16,1.83-2.16h11.18v2.6h-9.44s-.43.4-.43.43Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M69.16,52.83c-.4-.64-1.05-1.12-1.77-1.35-1.45-.47-8.04-.44-9.79-.26-.82.08-2.34.68-2.34,1.65v14.56s.24.26.26.26h2.86v-5.89h8.75c.32,0,1.46-.76,1.72-1.05,1.38-1.56,1.39-6.17.3-7.91ZM65.23,59.37h-6.84v-5.11s.27-.31.35-.34c.35-.17,5.62-.18,6.33-.09,2.53.3,1.92,5.55.17,5.55Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M46.42,67.07c-.56.39-1.32.53-2,.6-1.11.11-9.87.24-10.3-.05-.25-.17-.34-2.35.12-2.5l9.33-.03c1.32-.25,1.3-2.69.15-3.26-2.39-1.04-5.55-1.44-7.86-2.54-2.72-1.29-2.89-6.45-.07-7.7.16-.07.95-.36,1.02-.36h10.14v2.6h-9.1c-.44,0-.92.89-.95,1.32-.08,1.19.59,1.66,1.56,2.05,2.13.86,7.46,1.73,8.66,3.47,1.11,1.6.99,5.22-.71,6.4Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M133.57,67.07c-.56.39-1.32.53-2,.6-1.11.11-9.87.24-10.3-.05-.25-.17-.33-2.35.12-2.5l9.33-.03c1.32-.25,1.3-2.69.15-3.26-2.39-1.04-5.55-1.44-7.86-2.54-2.72-1.29-2.89-6.45-.07-7.7.16-.07.94-.36,1.02-.36h10.14v2.6h-9.1c-.44,0-.92.89-.94,1.32-.08,1.19.58,1.66,1.56,2.05,2.13.86,7.46,1.73,8.66,3.47,1.11,1.6.99,5.22-.71,6.4Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M27.41,52.31c-.97-1.7-3.77-1.69-4.75,0-2.2,5.09-4.47,10.17-6.38,15.37h3.03c.38,0,1.41-3.95,1.93-4.13,2.26.16,5.06-.31,7.26-.04.21.03.35-.01.51.18.36.43,1.31,3.99,1.73,3.99h3.03c-1.92-5.18-4.21-10.27-6.38-15.37ZM22,61.27l3.03-7.28,3.03,7.28h-6.06Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M91.83,67.68h-3.38c-.38,0-3.72-5.5-4.51-6.06-.72.61-3.96,6.06-4.33,6.06h-3.55l6.04-8.38-5.86-8.09c.89.17,2.82-.23,3.55,0,.34.11,3.61,5.18,4.08,5.89.74-.51,4.05-5.89,4.41-5.89h3.38l-5.85,8.06,6.02,8.41Z"
            />
            <path
              fill="#ffffff"
              class="cls-1"
              d="M120.76,65.08v2.6h-11.17c-.46,0-1.82-.79-1.82-1.3v-15.17h3.12v13.43s.4.43.43.43h9.44Z"
            />
            <rect
              class="cls-1"
              x="72.25"
              y="51.22"
              width="2.95"
              height="16.29"
            />
          </g> */}
        </svg>
        <div
        ref={loadingTextRef}
        className="mt-5 flex items-center gap-1 text-xs tracking-[0.35em] text-white/70 uppercase"
        >
        <span className="loading-text text-xl font-bold">Loading</span>
        <span className="dot text-[#70c879]">.</span>
        <span className="dot text-[#70c879]">.</span>
        <span className="dot text-[#70c879]">.</span>
        </div>


      </div>
    </div>
  );
}
